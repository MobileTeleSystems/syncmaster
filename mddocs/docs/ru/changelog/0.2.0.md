# 0.2.0 (2025-04-04) { #0.2.0 }

## TL;DR

– Полностью новый UI(пользовательский интерфейс).
– Добавлена ​​поддержка подключений к файловой системе.
– Добавлена ​​поддержка простых преобразований в процессе передачи данных: фильтрация файлов, фильтрация строк, изменение столбцов.
– Добавлена ​​поддержка стратегии инкрементального чтения.
– Добавлена ​​поддержка запуска передач по расписанию.
– Добавлена ​​поддержка изменения ограничений ресурсов SparkSession.

Огромное спасибо [Dmitry Pedchenko](https://github.com/dmitry-pedchenko), [Maxim Lixakov](https://github.com/maxim-lixakov), [Ilyas Gasanov](https://github.com/IlyasDevelopment), [Kirill Chernikov](https://github.com/Zabilsya).

## Критичные изменения

- Реализован единый формат обработки ошибок для повышения согласованности ([#95](https://github.com/MobileTeleSystems/syncmaster/issues/95))
- Изменён формат ответа для `GET /v1/groups` – добавлена ​​**текущая роль пользователя** для каждой группы ([#97](https://github.com/MobileTeleSystems/syncmaster/issues/97))
- Изменён формат ответа для `GET /v1/groups/:id` - добавлена ​​**текущая роль пользователя** для каждой группы ([#109](https://github.com/MobileTeleSystems/syncmaster/issues/109))
- Теперь миграции выполняются в отдельном контейнере, а не как часть контейнера `backend`. ([#163](https://github.com/MobileTeleSystems/syncmaster/issues/163))
- Удаляются записи **transfers**, **queues** и **groups** вместо того, чтобы отмечать их как удалённые ([#168](https://github.com/MobileTeleSystems/syncmaster/issues/168))
- Перемещено поле `type` из вложенного поля `connection_data` в корневой уровень ответа `Connection`. ([#169](https://github.com/MobileTeleSystems/syncmaster/issues/169))
- Отделен `auth_data.type` от типа подключения (например, `postgres`) и связан с типом аутентификации (например, `basic`). ([#169](https://github.com/MobileTeleSystems/syncmaster/issues/169))
- Добавлено удаление записей **connections** вместо пометки их как удалённых ([#170](https://github.com/MobileTeleSystems/syncmaster/issues/170))
- Используется PUT вместо PATCH для моделей `Connection` и `Transfer` ([#215](https://github.com/MobileTeleSystems/syncmaster/issues/215))
- Возвращаются новые объекты подключения и передачи в эндпоинтах `POST /v1/transfer/copy` и `POST /v1/connection/copy`.
- Изменен статус ответа с 200 на 204 для всех эндпоинтов `DELETE`.

## Функции

- Добавлен hive к известным типам ([#67](https://github.com/MobileTeleSystems/syncmaster/issues/67))
- Разрешен поиск по **группам**, **пользователям**, **подключениям**, **передачам**, **очередям** ([#92](https://github.com/MobileTeleSystems/syncmaster/issues/92), [#94](https://github.com/MobileTeleSystems/syncmaster/issues/94), [#99](https://github.com/MobileTeleSystems/syncmaster/issues/99), [#100](https://github.com/MobileTeleSystems/syncmaster/issues/100), [#101](https://github.com/MobileTeleSystems/syncmaster/issues/101), [#103](https://github.com/MobileTeleSystems/syncmaster/issues/103))
- Добавлены фильтры для **подключений**, **пересылок** и **запусков** ([#94](https://github.com/MobileTeleSystems/syncmaster/issues/94), [#102](https://github.com/MobileTeleSystems/syncmaster/issues/102), [#106](https://github.com/MobileTeleSystems/syncmaster/issues/106))
- Реализован планировщик для запуска задач Celery по расписанию. Это можно сделать, установив `Transfer.is_scheduled=True` и `Transfer.schedule="..."` (выражение в стиле cron).
Модель выполнения теперь имеет поле `type` с вариантами `MANUAL` и `SCHEDULED`. ([#114](https://github.com/MobileTeleSystems/syncmaster/issues/114))
- Добавлен ​​эндпоинт GET `v1/monitoring/metrics` для предоставления базовых метрик HTTP-сервера в формате Prometheus ([#121](https://github.com/MobileTeleSystems/syncmaster/issues/121))
- Реализован `KeycloakAuthProvider` для аутентификации с единым входом (SSO). ([#123](https://github.com/MobileTeleSystems/syncmaster/issues/123))
- Реализован `DummyAuthProvider` для сред разработки и тестирования. ([#123](https://github.com/MobileTeleSystems/syncmaster/issues/123))
- Добавлены схемы API для новых источников БД — Clickhouse, MSSQL, MySQL ([#124](https://github.com/MobileTeleSystems/syncmaster/issues/124), [#125](https://github.com/MobileTeleSystems/syncmaster/issues/125), [#126](https://github.com/MobileTeleSystems/syncmaster/issues/126), [#160](https://github.com/MobileTeleSystems/syncmaster/issues/160))
- Добавлена ​​логика для обработки передач FTP, FTPS, SFTP, Samba, WebDAV ([#189](https://github.com/MobileTeleSystems/syncmaster/issues/189), [#191](https://github.com/MobileTeleSystems/syncmaster/issues/191), [#192](https://github.com/MobileTeleSystems/syncmaster/issues/192), [#194](https://github.com/MobileTeleSystems/syncmaster/issues/194))
- Добавлены схемы API для источников файлов: SFTP, FTP, FTPS, WebDAV, Samba ([#187](https://github.com/MobileTeleSystems/syncmaster/issues/187))
- Добавлены схемы API для форматов файлов: Excel, XML, ORC, Parquet ([#140](https://github.com/MobileTeleSystems/syncmaster/issues/140), [#142](https://github.com/MobileTeleSystems/syncmaster/issues/142), [#143](https://github.com/MobileTeleSystems/syncmaster/issues/143), [#144](https://github.com/MobileTeleSystems/syncmaster/issues/144))
- Добавлены параметры сжатия для файлов форматов CSV, JSON, JSONLine, Excel, ORC, Parquet, XML ([#159](https://github.com/MobileTeleSystems/syncmaster/issues/159), [#161](https://github.com/MobileTeleSystems/syncmaster/issues/161))
- Добавлены преобразования для **Переводов** с фильтрацией строк датафрейма ([#184](https://github.com/MobileTeleSystems/syncmaster/issues/184))
- Добавлены преобразования для **Переводов** с фильтрацией столбцов датафрейма ([#186](https://github.com/MobileTeleSystems/syncmaster/issues/186))
- Добавлены преобразования для **Переводов** с фильтрацией файлов ([#198](https://github.com/MobileTeleSystems/syncmaster/issues/198))
- Добавлено поле `increment_by` в `strategy_params` ([#202](https://github.com/MobileTeleSystems/syncmaster/issues/202))
- Реализована стратегия инкремента для передач с файловыми источниками ([#209](https://github.com/MobileTeleSystems/syncmaster/issues/209))
- Реализована стратегия приращения для передач с источниками баз данных ([#211](https://github.com/MobileTeleSystems/syncmaster/issues/211))
- Добавлено поле `resources` в `Transfer`. ([#214](https://github.com/MobileTeleSystems/syncmaster/issues/214))
- Добавлено поле `file_name_template` в `target_params` ([#196](https://github.com/MobileTeleSystems/syncmaster/issues/196), [#201](https://github.com/MobileTeleSystems/syncmaster/issues/201))

## Улучшения

- Обновлена ​​модель `User`: теперь в нее включены поля `email`, `first_name`, `middle_name` и `last_name` (все необязательные). ([#123](https://github.com/MobileTeleSystems/syncmaster/issues/123))
- Чтение переменной окружения `SYNCMASTER__ENTRYPOINT__SUPERUSERS` для повышения роли пользователей до `SUPERUSER` при запуске сервера. ([#137](https://github.com/MobileTeleSystems/syncmaster/issues/137))
- Включен динамический выбор поставщика аутентификации через переменную окружения `SYNCMASTER__AUTH__PROVIDER`. ([#123](https://github.com/MobileTeleSystems/syncmaster/issues/123))
- Включено параллельное чтение из источников JDBC. ([#219](https://github.com/MobileTeleSystems/syncmaster/issues/219))
- Сброс HWM при смене стратегии с «инкрементной» на «полную». ([#217](https://github.com/MobileTeleSystems/syncmaster/issues/217))
- Предоставление прав «только чтение» предыдущему владельцу группы при передаче права собственности ([#135](https://github.com/MobileTeleSystems/syncmaster/issues/135))

## Исправление ошибок

- Используйте Hadoop AWS `magic` commiter только если *target* передачи — S3. ([#46](https://github.com/MobileTeleSystems/syncmaster/issues/46))
- Убедитесь, что `service_name` и `sid` являются взаимоисключающими при редактировании подключения Oracle. ([#52](https://github.com/MobileTeleSystems/syncmaster/issues/52))
- Имя очереди уникально в пределах группы, новое поле `slug` уникально глобально. ([#54](https://github.com/MobileTeleSystems/syncmaster/issues/54), [#119](https://github.com/MobileTeleSystems/syncmaster/issues/119))
- Запретите обновление типа соединения, если с этим соединением связана передача. ([#55](https://github.com/MobileTeleSystems/syncmaster/issues/55))
- Исправлена ​​ошибка, из-за которой значение поля `is_scheduled` игнорировалось. ([#57](https://github.com/MobileTeleSystems/syncmaster/issues/57))
- Группа без назначенных пользователей отсутствовала в списке групп. ([#62](https://github.com/MobileTeleSystems/syncmaster/issues/62))
- Сбрасывать учётные данные подключения при запуске передачи. ([#63](https://github.com/MobileTeleSystems/syncmaster/issues/63))
